"use strict";(self["webpackChunkschool_management_system"]=self["webpackChunkschool_management_system"]||[]).push([[291],{5291:function(t,e,l){l.r(e),l.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-button",{staticStyle:{float:"right","margin-top":"-10px","margin-bottom":"10px"},on:{click:function(e){t.addStuDialogVisible=!0}}},[t._v("添加学生")]),e("el-dialog",{attrs:{title:"添加学生",visible:t.addStuDialogVisible},on:{"update:visible":function(e){t.addStuDialogVisible=e}}},[e("el-form",{attrs:{model:t.addStuForm}},[e("span",[t._v("当前页仅添加基本信息,其余项点击进行编辑修改")]),e("el-form-item",{attrs:{label:"姓名",prop:"stu_Name","label-width":"150px"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addStuForm.stu_Name,callback:function(e){t.$set(t.addStuForm,"stu_Name",e)},expression:"addStuForm.stu_Name"}})],1),e("el-form-item",{attrs:{prop:"title",label:"基本信息","label-width":"150px"}},[e("el-input",{model:{value:t.addStuForm.title,callback:function(e){t.$set(t.addStuForm,"title",e)},expression:"addStuForm.title"}})],1),e("el-form-item",{attrs:{prop:"stu_Address",label:"地址","label-width":"150px"}},[e("el-input",{model:{value:t.addStuForm.stu_Address,callback:function(e){t.$set(t.addStuForm,"stu_Address",e)},expression:"addStuForm.stu_Address"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addStuDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addStu}},[t._v("确 定")])],1)],1),e("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.userList}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e("el-form-item",{attrs:{label:"学号"}},[e("span",[t._v(t._s(l.row.stu_Id))])]),e("el-form-item",{attrs:{label:"学生姓名"}},[e("span",[t._v(t._s(l.row.stu_Name))])]),e("el-form-item",{attrs:{label:"专业班级"}},[e("span",[t._v(t._s(l.row.profession)+" "+t._s(l.row.stu_Grade)+"0"+t._s(l.row.stu_Class))])]),e("el-form-item",{attrs:{label:"辅导员"}},[e("span",[t._v(t._s(l.row.counsellor))])]),e("el-form-item",{attrs:{label:"入学时间",width:"180"}},[e("span",[t._v(t._s(l.row.date))])]),e("el-form-item",{attrs:{label:"家庭地址"}},[e("span",[t._v(t._s(l.row.stu_Address))])]),e("el-form-item",{attrs:{label:"信息说明",width:"180"}},[e("span",[t._v(t._s(l.row.title))])])],1)]}}])}),e("el-table-column",{attrs:{prop:"Id",label:"ID",width:"150"}}),e("el-table-column",{attrs:{prop:"college",sortable:"",label:"学院",width:"180",filters:t.selectCollege,"filter-method":t.filterHandler,"filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(l){return[l.row.college===t.selectCollege[0].text?e("el-tag",[t._v(t._s(l.row.college))]):l.row.college===t.selectCollege[1].text?e("el-tag",{attrs:{type:"success"}},[t._v(t._s(l.row.college))]):l.row.college===t.selectCollege[2].text?e("el-tag",{attrs:{type:"warning"}},[t._v(t._s(l.row.college))]):e("el-tag",{attrs:{type:"danger"}},[t._v(t._s(l.row.college))])]}}])}),e("el-table-column",{attrs:{prop:"stu_Id",label:"学号",width:"200"}}),e("el-table-column",{attrs:{prop:"stu_Name",label:"学生姓名",width:"180"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(l){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleEdit(l.$index,l.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(l.row.stu_Id)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{attrs:{title:"修改信息",visible:t.EditStuDialogVisible},on:{"update:visible":function(e){t.EditStuDialogVisible=e}}},[e("el-form",{attrs:{model:t.editStuForm}},[e("el-form-item",{attrs:{label:"姓名",prop:"stu_Name","label-width":"150px"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.editStuForm.stu_Name,callback:function(e){t.$set(t.editStuForm,"stu_Name",e)},expression:"editStuForm.stu_Name"}})],1),e("el-form-item",{attrs:{prop:"title",label:"基本信息","label-width":"150px"}},[e("el-input",{model:{value:t.editStuForm.title,callback:function(e){t.$set(t.editStuForm,"title",e)},expression:"editStuForm.title"}})],1),e("el-form-item",{attrs:{prop:"stu_Address",label:"地址","label-width":"150px"}},[e("el-input",{model:{value:t.editStuForm.stu_Address,callback:function(e){t.$set(t.editStuForm,"stu_Address",e)},expression:"editStuForm.stu_Address"}})],1),e("el-form-item",{attrs:{prop:"date",label:"入学日期","label-width":"150px"}},[e("el-input",{attrs:{disabled:""},model:{value:t.editStuForm.date,callback:function(e){t.$set(t.editStuForm,"date",e)},expression:"editStuForm.date"}})],1),e("el-form-item",{attrs:{prop:"counsellor",label:"辅导员","label-width":"150px"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editStuForm.counsellor,callback:function(e){t.$set(t.editStuForm,"counsellor",e)},expression:"editStuForm.counsellor"}},t._l(t.selectCounsellor,(function(t){return e("el-option",{key:t.value,attrs:{label:t.counsellor,value:t.counsellor}})})),1)],1),e("el-form-item",{attrs:{prop:"college",label:"专业学院","label-width":"150px"}},[[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editStuForm.college,callback:function(e){t.$set(t.editStuForm,"college",e)},expression:"editStuForm.college"}},t._l(t.selectCollege,(function(t){return e("el-option",{key:t.value,attrs:{label:t.text,value:t.text}})})),1)]],2)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.EditStuDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.EditStu}},[t._v("确 定")])],1)],1),e("el-pagination",{attrs:{"current-page":t.pageInfo.pageIndex,"page-sizes":[5,10,15,20],"page-size":t.pageInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],a=(l(7658),{data(){return{isEdit:!1,input:"",userList:[],total:0,pageInfo:{pageIndex:1,pageSize:10},addStuForm:{stu_Name:"",title:"",stu_Address:"",stu_Id:""},editStuForm:{stu_Id:"",stu_Name:"",title:"",stu_Address:"",date:"",stu_Class:"",stu_Grade:"",profession:"",college:"",counsellor:""},addStuDialogVisible:!1,EditStuDialogVisible:!1,selectCounsellor:[],selectCollege:[]}},methods:{filterHandler(t,e,l){const s=l.property;return e[s]===t},getAllList(){this.axios.get("/api/getAll/stuInfo").then((t=>{const e=t.data.list,l=new Map,s=(t,e)=>{for(const s of t)l.has(s[e])||l.set(s[e],s);return[...l.values()]},o=s(e,"counsellor");for(let u=0;u<o.length;u++)this.selectCounsellor.push({value:o[u].counsellor,counsellor:o[u].counsellor});const a=new Map,i=(t,e)=>{for(const l of t)a.has(l[e])||a.set(l[e],l);return[...a.values()]},r=i(e,"college");for(let u=0;u<r.length;u++)this.selectCollege.push({value:r[u].college,text:r[u].college})}))},getUserList(){this.axios.get("/api/getByPage/stuInfo",{params:this.pageInfo}).then((t=>{this.userList=t.data.list,this.total=t.data.total}))},addStu(){this.axios.post("/api/add/stuInfo",{stu_Name:this.addStuForm.stu_Name,title:this.addStuForm.title,stu_Address:this.addStuForm.stu_Address,stu_Id:this.total+1}).then((t=>{this.addStuDialogVisible=!1,this.getUserList()}))},handleEdit(t,e){this.EditStuDialogVisible=!0,this.editStuForm=e},EditStu(t){this.axios.post("/api/edit/stuInfo",{Id:this.editStuForm.Id,stu_Name:this.editStuForm.stu_Name,title:this.editStuForm.title,stu_Address:this.editStuForm.stu_Address,stu_Id:this.editStuForm.stu_Id,stu_Class:this.editStuForm.stu_Class,stu_Grade:this.editStuForm.stu_Grade,date:this.editStuForm.date,counsellor:this.editStuForm.counsellor,profession:this.editStuForm.profession,college:this.editStuForm.college}).then((t=>{this.EditStuDialogVisible=!1,this.getUserList()}))},handleDelete(t){this.axios.post("/api/del/stuInfo",{id:t}).then((t=>{t.data.total/10%1===0&&this.pageInfo.pageIndex===t.data.total/10+1&&(this.pageInfo.pageIndex=this.pageInfo.pageIndex-1,this.getUserList()),this.getUserList()}))},handleSizeChange(t){this.pageInfo.pageSize=t,this.getUserList()},handleCurrentChange(t){this.pageInfo.pageIndex=t,this.getUserList()}},created(){this.getAllList(),this.getUserList()}}),i=a,r=l(1001),u=(0,r.Z)(i,s,o,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=291.ced8951c.js.map